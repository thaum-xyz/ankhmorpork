---
common:
  namespace: &namespace "paperless"
paperless:
  version: "1.14.2"  # application-version-from-github: paperless-ngx/paperless-ngx
  image: "ghcr.io/paperless-ngx/paperless-ngx:1.14.2"  # application-image-from-github: paperless-ngx/paperless-ngx
  namespace: *namespace
  resources:
    requests:
      cpu: 350m
      memory: 1400Mi
    limits:
      cpu: 2
      memory: 3Gi
  storage:
    data:
      storageClassName: "qnap-nfs"
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 1Gi
    media:
      storageClassName: "qnap-nfs"
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 10Gi
    consume:
      storageClassName: "manual"
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 1Gi
  ingress:
    domain: "papers.krupa.net.pl"
    className: nginx
    annotations: 
      cert-manager.io/cluster-issuer: 'letsencrypt-prod'
      gethomepage.dev/enabled: "true"
      gethomepage.dev/group: Ankh Cloud
      gethomepage.dev/icon: https://raw.githubusercontent.com/linuxserver/docker-templates/master/linuxserver.io/img/paperless-ngx-logo.png
      gethomepage.dev/name: Paperless
      gethomepage.dev/description: Document management system
      nginx.ingress.kubernetes.io/proxy-body-size: 10m
      nginx.ingress.kubernetes.io/limit-rpm: '100'
      nginx.ingress.kubernetes.io/limit-rps: '10'
      nginx.ingress.kubernetes.io/limit-req-status-code: '429'
  timezone: "Europe/Berlin"
  database:
    name: &dbname paperless
    userRef: PAPERLESS_DB_USER
    passRef: PAPERLESS_DB_PASS
  secretsRefs:
    user: PAPERLESS_ADMIN_USER
    pass: PAPERLESS_ADMIN_PASS
    email: PAPERLESS_ADMIN_EMAIL
    key: PAPERLESS_SECRET_KEY

  config:
    PAPERLESS_OCR_LANGUAGE: eng+deu+pol
    PAPERLESS_OCR_LANGUAGES: pol  # additional languages
    PAPERLESS_TIKA_ENABLED: '0'
    # PAPERLESS_TIKA_ENABLED=1
    # PAPERLESS_TIKA_ENDPOINT=http://tika.paperless.svc:9998
    # PAPERLESS_TIKA_GOTENBERG_ENDPOINT=http://gotenberg.paperless.svc:3000

db:
  version: "2.7.0"  # application-version-from-github: timescale/timescaledb
  image: "timescale/timescaledb:2.7.0-pg14"  # application-version-from-github: timescale/timescaledb
  name: db
  namespace: *namespace
  resources:
    requests:
      cpu: 70m
      memory: 70Mi
  storage:
    name: "db-data"
    pvcSpec:
      storageClassName: "qnap-nfs"
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 300Mi
  database:
    userRef: PAPERLESS_DB_USER
    passRef: PAPERLESS_DB_PASS
    name: *dbname

broker:
  version: "6.0"  # application-version-from-github: redis/redis
  image: "redis:6.0"  # application-version-from-github: redis/redis
  namespace: *namespace
  resources:
    requests:
      cpu: 30m
      memory: 100Mi
    limits:
      cpu: 50m
      memory: 100Mi
  storage:
    name: "broker-data"
    pvcSpec:
      storageClassName: "qnap-nfs"
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 300Mi
